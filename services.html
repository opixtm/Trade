<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dasbor Analisis Komprehensif Bitcoin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: "Calm Neutral" - A palette using warm grays, a soft off-white background, with muted blue and orange as primary and secondary accents. This creates a professional, data-driven, yet calm and approachable feel suitable for financial analysis. -->
    <!-- Application Structure Plan: A single-page dashboard application with a sticky top navigation bar. This structure allows users to get a high-level overview immediately and then dive into specific thematic sections (Siklus, Kesehatan Jaringan, Risiko, Proyeksi) without losing context. The flow is designed to guide the user from historical context to future projections logically. Key data is presented in cards for quick consumption, while complex topics are broken down into interactive charts and tabbed sections. This non-linear, thematic structure is superior to the report's linear format for on-screen exploration and user engagement. Gemini API features for scenario analysis and concept explanation are added to enhance interactivity and understanding. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Historical Drawdowns -> Goal: Compare -> Viz: Bar Chart (Chart.js) -> Interaction: Hover for details -> Justification: Visually striking comparison of cycle severity.
        - Report Info: 200W MA & Realized Price -> Goal: Change/Relationships -> Viz: Line Chart (Chart.js) with toggleable datasets -> Interaction: Buttons to show/hide indicators -> Justification: Allows users to interactively verify the indicators' roles as historical support.
        - Report Info: Existential Threats (Regulation, 51% Attack, Quantum) -> Goal: Organize -> Viz: Tabbed content panes (HTML/JS) -> Interaction: Click tabs to switch content -> Justification: Breaks down dense text into digestible, user-selectable chunks, preventing information overload.
        - Report Info: MVRV Ratio -> Goal: Change/Relationships -> Viz: Area Chart (Chart.js) with a threshold line at 1.0 -> Interaction: Hover for value -> Justification: Clearly visualizes the "overvalued" vs "undervalued" periods as described in the report.
        - Report Info: Price Floor Projection -> Goal: Synthesize -> Viz: Static diagram built with HTML/Tailwind -> Interaction: None -> Justification: A clear, infographic-style summary that visually anchors the report's main conclusion about price convergence.
        - New Feature: AI Scenario Analysis -> Goal: Explore/Synthesize -> Viz: Text Input + Generated Text Output -> Interaction: User types scenario, clicks button to get AI analysis -> Justification: Adds a dynamic, forward-looking capability to the dashboard, powered by Gemini.
        - New Feature: AI Concept Explanation -> Goal: Inform/Clarify -> Viz: Modal Window with Generated Text -> Interaction: User clicks icon, modal appears with AI explanation -> Justification: Improves accessibility and understanding of complex terms for a broader audience, powered by Gemini.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .stat-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .stat-card:hover {
            transform: translateY(-4px);
        }
        .nav-link {
            transition: background-color 0.2s, color 0.2s;
        }
        .tab-button {
            transition: background-color 0.2s, color 0.2s;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            margin: 10% auto;
            width: 90%;
            max-width: 600px;
            position: relative;
        }
        .modal-close {
            cursor: pointer;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        /* Tailwind Dark Mode Configuration */
        .dark .bg-white { background-color: #1e293b; /* slate-800 */ }
        .dark .bg-slate-50 { background-color: #334155; /* slate-700 */ }
        .dark .text-slate-900 { color: #f1f5f9; /* slate-100 */ }
        .dark .text-slate-800 { color: #f8fafc; /* slate-50 */ }
        .dark .text-slate-700 { color: #cbd5e1; /* slate-300 */ }
        .dark .text-slate-600 { color: #94a3b8; /* slate-400 */ }
        .dark .text-slate-500 { color: #64748b; /* slate-500 */ }
        .dark .border-slate-200 { border-color: #475569; /* slate-600 */ }
        .dark .border-slate-300 { border-color: #475569; /* slate-600 */ }
        .dark .shadow-md { box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.4); }
        .dark .shadow-xl { box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.4), 0 8px 10px -6px rgb(0 0 0 / 0.4); }
        .dark .bg-white\/80 { background-color: rgba(15, 23, 42, 0.8); /* slate-900/80 */ }
        .dark .nav-link:hover, .dark .nav-link.active { background-color: #334155; /* slate-700 */ color: white; }
        .dark .tab-button.active { background-color: #f1f5f9; /* slate-100 */ color: #0f172a; /* slate-900 */ }
        .dark .bg-emerald-50 { background-color: rgba(16, 185, 129, 0.1); }
        .dark .modal-content { background-color: #1e293b; /* slate-800 */ }
        .dark .modal-close { color: #94a3b8; }
        .dark textarea { background-color: #334155; border-color: #475569; color: #f1f5f9; }
    </style>
    <script>
        // Set theme on initial load
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 antialiased">

    <header class="bg-white/80 dark:bg-slate-900/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold">.  ......  ......  .  .Dasbor Analisis Bitcoin</h1>
                </div>
                <div class="absolute top-0 left-0 right-0 w-full">
                        <div class="container mx-auto flex justify-between items-center p-1 md:p-0">
                            <a href="https://opixtm.github.io/Trade/about" target="_blank" rel="noopener noreferrer" 
                            class="btn-action bg-blue-800 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg text-xs md:text-sm">
                                PROJECTOR
                            </a>
                            
                            <a href="https://opixtm.github.io/Trade/" target="_blank" rel="noopener noreferrer" 
                            class="btn-action bg-yellow-500 hover:bg-yellow-600 text-slate-900 font-bold py-2 px-4 rounded-lg text-xs md:text-sm">
                                ANALYZER
                            </a>
                        </div>
                <div class="hidden md:flex items-center space-x-4">
                    <a href="#ringkasan" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Ringkasan</a>
                    <a href="#siklus" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Siklus & Tren</a>
                    <a href="#kesehatan-jaringan" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Kesehatan Jaringan</a>
                    <a href="#risiko" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Analisis Risiko</a>
                    <a href="#proyeksi" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Proyeksi Harga</a>
                    <a href="#ai-analysis" class="nav-link text-blue-600 dark:text-blue-400 font-semibold px-3 py-2 rounded-md text-sm">âœ¨ Analisis AI</a>
                </div>
                <div class="flex items-center">
                    <button id="theme-toggle" class="p-2 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 focus:outline-none">
                        <svg id="theme-toggle-dark-icon" class="h-5 w-5 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                        <svg id="theme-toggle-light-icon" class="h-5 w-5 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 5.05A1 1 0 003.636 6.464l.707.707a1 1 0 001.414-1.414l-.707-.707zM3 11a1 1 0 100-2H2a1 1 0 100 2h1zm12.12 4.47a1 1 0 010 1.414l-.707.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                    </button>
                    <button id="settings-btn" class="p-2 ml-2 rounded-md hover:bg-gray-200 dark:hover:bg-slate-700 focus:outline-none">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    </button>
                    <div class="md:hidden ml-2">
                        <select id="mobile-nav" class="bg-gray-200 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                            <option value="#ringkasan">Ringkasan</option>
                            <option value="#siklus">Siklus & Tren</option>
                            <option value="#kesehatan-jaringan">Kesehatan Jaringan</option>
                            <option value="#risiko">Analisis Risiko</option>
                            <option value="#proyeksi">Proyeksi Harga</option>
                            <option value="#ai-analysis">âœ¨ Analisis AI</option>
                        </select>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <section id="ringkasan" class="mb-16 scroll-mt-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold tracking-tight sm:text-4xl">Analisis Risiko & Proyeksi Harga Bitcoin</h2>
                <p class="mt-4 max-w-3xl mx-auto text-lg text-slate-600">Sebuah dasbor interaktif berdasarkan laporan Juli 2025, menyajikan analisis komprehensif tentang potensi risiko sistemik, dinamika siklus pasar, dan proyeksi harga terendah Bitcoin.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 text-center">
                <div class="stat-card bg-white rounded-lg p-6 shadow-md hover:shadow-xl">
                    <h3 class="text-sm font-medium text-slate-500">Puncak Siklus (ATH) 2025</h3>
                    <p class="mt-1 text-3xl font-semibold tracking-tight">$123.000</p>
                    <p class="text-xs text-slate-500 mt-1">Titik referensi puncak konservatif untuk analisis.</p>
                </div>
                <div class="stat-card bg-white rounded-lg p-6 shadow-md hover:shadow-xl">
                    <h3 class="text-sm font-medium text-slate-500">Proyeksi Harga Terendah Potensial</h3>
                    <p class="mt-1 text-3xl font-semibold tracking-tight text-emerald-600 dark:text-emerald-400">$42.000 - $48.000</p>
                    <p class="text-xs text-slate-500 mt-1">Zona konvergensi indikator on-chain & teknis.</p>
                </div>
                <div class="stat-card bg-white rounded-lg p-6 shadow-md hover:shadow-xl">
                    <h3 class="text-sm font-medium text-slate-500">Risiko Utama</h3>
                    <p class="mt-1 text-3xl font-semibold tracking-tight text-amber-600 dark:text-amber-400">Volatilitas Harga</p>
                    <p class="text-xs text-slate-500 mt-1">Risiko utama adalah penurunan harga, bukan kegagalan protokol.</p>
                </div>
            </div>
        </section>

        <section id="siklus" class="mb-16 scroll-mt-20">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold">Siklus Pasar & Tren Historis</h2>
                <p class="mt-2 max-w-2xl mx-auto text-md text-slate-600">Memahami pola historis Bitcoin sangat penting untuk mengontekstualisasikan pergerakan saat ini dan masa depan. Bagian ini menganalisis penurunan pasar (*drawdowns*) dan metrik valuasi utama.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-4 text-center">Penurunan Pasar Historis (Bear Market Drawdowns)</h3>
                    <div class="chart-container h-80 md:h-96">
                        <canvas id="drawdownChart"></canvas>
                    </div>
                    <p class="text-sm text-slate-600 mt-4">Grafik ini membandingkan besarnya penurunan harga dari puncak ke dasar selama tiga siklus *bear market* utama. Terlihat adanya tren *diminishing drawdowns*, di mana setiap siklus penurunan menjadi sedikit kurang parah, menunjukkan kematangan pasar yang meningkat.</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <div class="flex items-center justify-center mb-4">
                        <h3 class="text-xl font-semibold text-center">Rasio MVRV (Market Value to Realized Value)</h3>
                        <button class="explain-btn ml-2 text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-concept="Rasio MVRV">âœ¨ Jelaskan</button>
                    </div>
                    <div class="chart-container h-80 md:h-96">
                        <canvas id="mvrvChart"></canvas>
                    </div>
                    <p class="text-sm text-slate-600 mt-4">Rasio MVRV membandingkan nilai pasar dengan basis biaya agregat. Ketika rasio turun di bawah 1.0 (area yang diarsir), ini secara historis menandakan bahwa pasar dinilai terlalu rendah (*undervalued*) dan merupakan zona akumulasi yang optimal.</p>
                </div>
            </div>
        </section>

        <section id="kesehatan-jaringan" class="mb-16 scroll-mt-20">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold">Kesehatan & Fundamental Jaringan</h2>
                <p class="mt-2 max-w-2xl mx-auto text-md text-slate-600">Indikator on-chain memberikan gambaran transparan tentang fundamental ekonomi dan keamanan jaringan Bitcoin. Bagian ini menyoroti metrik support jangka panjang.</p>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold mb-1 text-center">Indikator Support Fundamental Jangka Panjang</h3>
                <p class="text-center text-sm text-slate-500 mb-4">Klik tombol untuk menampilkan/menyembunyikan indikator pada grafik harga.</p>
                <div class="flex justify-center space-x-2 mb-4">
                    <button id="toggle200WMA" class="bg-blue-500 text-white px-4 py-2 rounded-md text-sm font-medium">200W MA</button>
                    <button id="toggleRealizedPrice" class="bg-orange-500 text-white px-4 py-2 rounded-md text-sm font-medium">Realized Price</button>
                </div>
                <div class="chart-container h-96 md:h-[500px]">
                    <canvas id="priceChart"></canvas>
                </div>
                <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                    <div>
                        <div class="flex items-center">
                            <h4 class="font-semibold text-blue-600 dark:text-blue-400">Moving Average 200-Minggu (200W MA)</h4>
                            <button class="explain-btn ml-2 text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-concept="Moving Average 200-Minggu">âœ¨ Jelaskan</button>
                        </div>
                        <p class="text-slate-600">Indikator teknis yang menghaluskan harga selama hampir 4 tahun. Secara historis, ini telah bertindak sebagai lantai harga absolut selama fase kapitulasi *bear market*.</p>
                    </div>
                    <div>
                        <div class="flex items-center">
                            <h4 class="font-semibold text-orange-600 dark:text-orange-400">Realized Price</h4>
                            <button class="explain-btn ml-2 text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-concept="Realized Price">âœ¨ Jelaskan</button>
                        </div>
                        <p class="text-slate-600">Metrik on-chain yang mewakili basis biaya agregat dari semua pemegang. Ketika harga spot turun di bawahnya (MVRV < 1), ini menandakan kapitulasi pasar dan secara historis menjadi support yang kuat.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="risiko" class="mb-16 scroll-mt-20">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold">Analisis Ancaman Eksistensial</h2>
                <p class="mt-2 max-w-2xl mx-auto text-md text-slate-600">Meskipun protokol Bitcoin sangat tangguh, penting untuk memahami vektor ancaman teoretis. Bagian ini mengkaji kelayakan dan dampak dari risiko-risiko utama.</p>
            </div>
            <div class="max-w-4xl mx-auto">
                <div class="flex justify-center border-b border-slate-300 mb-4">
                    <button data-tab="regulasi" class="tab-button active px-4 py-2">Regulasi Global</button>
                    <button data-tab="serangan51" class="tab-button px-4 py-2">Serangan 51%</button>
                    <button data-tab="kuantum" class="tab-button px-4 py-2">Komputasi Kuantum</button>
                </div>
                <div id="tab-regulasi" class="tab-content active bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-2">Regulasi Global Terkoordinasi</h3>
                    <p class="text-slate-600">Ancaman regulasi yang paling kredibel bukanlah larangan kepemilikan, melainkan serangan terkoordinasi pada "titik cekik" (*choke points*) seperti bursa terpusat (CEX). Pengetatan aturan AML/KYC secara global yang mengisolasi Bitcoin dari sistem keuangan fiat merupakan vektor risiko jangka panjang yang paling signifikan, meskipun probabilitas koordinasi G7 yang sempurna tetap rendah.</p>
                    <p class="mt-3 font-semibold">Probabilitas Praktis: <span class="text-amber-600 dark:text-amber-400">Rendah-Menengah</span></p>
                </div>
                <div id="tab-serangan51" class="tab-content bg-white p-6 rounded-lg shadow-md">
                    <div class="flex items-center mb-2">
                        <h3 class="text-xl font-semibold">Serangan 51%</h3>
                        <button class="explain-btn ml-2 text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-concept="Serangan 51% pada Bitcoin">âœ¨ Jelaskan</button>
                    </div>
                    <p class="text-slate-600">Serangan ini membutuhkan penguasaan lebih dari 50% *hash rate* jaringan. Untuk Bitcoin, ini hampir tidak mungkin karena biaya kapital dan operasional yang sangat besar. Selain itu, serangan yang berhasil akan merusak kepercayaan pada jaringan, membuat nilai aset yang dimanipulasi menjadi nol. Ini adalah ancaman yang bersifat merusak diri sendiri (*self-defeating*) dan tidak rasional secara ekonomi.</p>
                     <p class="mt-3 font-semibold">Probabilitas Praktis: <span class="text-emerald-600 dark:text-emerald-400">Sangat Rendah</span></p>
                </div>
                <div id="tab-kuantum" class="tab-content bg-white p-6 rounded-lg shadow-md">
                    <h3 class="text-xl font-semibold mb-2">Ancaman Komputasi Kuantum</h3>
                    <p class="text-slate-600">Komputer kuantum yang cukup kuat secara teoretis dapat memecahkan kriptografi ECDSA Bitcoin. Namun, ancaman praktis diperkirakan masih 10-20 tahun lagi. Komunitas pengembang secara aktif meneliti kriptografi pasca-kuantum (PQC) sebagai mitigasi. Risiko sebenarnya adalah kegagalan sosial untuk mencapai konsensus dan melakukan pembaruan protokol tepat waktu, bukan serangan kejutan.</p>
                     <p class="mt-3 font-semibold">Probabilitas Praktis: <span class="text-emerald-600 dark:text-emerald-400">Sangat Rendah (Jangka Pendek),</span> <span class="text-amber-600 dark:text-amber-400">Menengah (Jangka Panjang)</span></p>
                </div>
            </div>
        </section>

        <section id="proyeksi" class="mb-16 scroll-mt-20">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold">Sintesis & Proyeksi Harga Terendah</h2>
                <p class="mt-2 max-w-2xl mx-auto text-md text-slate-600">Dengan menggabungkan analisis historis, on-chain, dan teknis, kita dapat memproyeksikan zona support fundamental yang paling potensial dalam skenario kapitulasi pasar.</p>
            </div>
            <div class="bg-white p-8 rounded-lg shadow-xl max-w-5xl mx-auto">
                <h3 class="text-2xl font-bold text-center mb-6">Triangulasi Indikator Lantai Harga</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-start">
                    <div class="text-center p-4 border border-slate-200 rounded-lg">
                        <h4 class="font-semibold">Skenario Drawdown</h4>
                        <p class="text-2xl font-bold my-2 text-red-600 dark:text-red-400">~$27k - $31k</p>
                        <p class="text-xs text-slate-500">Berdasarkan penurunan 75-78% dari ATH $123k. Cenderung menjadi skenario terburuk absolut.</p>
                    </div>
                    <div class="text-center p-4 border-2 border-emerald-500 dark:border-emerald-400 rounded-lg bg-emerald-50">
                        <h4 class="font-semibold">Zona Konvergensi</h4>
                        <p class="text-3xl font-bold my-2 text-emerald-600 dark:text-emerald-400">$42k - $48k</p>
                        <p class="text-xs text-slate-500">Area di mana support teknis (200W MA) dan fundamental on-chain (Realized Price) bertemu. **Proyeksi lantai paling potensial.**</p>
                    </div>
                    <div class="text-center p-4 border border-slate-200 rounded-lg">
                        <h4 class="font-semibold">Indikator On-Chain</h4>
                        <p class="text-2xl font-bold my-2 text-blue-600 dark:text-blue-400">~$45k - $50k</p>
                        <p class="text-xs text-slate-500">Proyeksi level 200W MA dan Realized Price pada periode dasar pasar potensial (akhir 2025 - awal 2026).</p>
                    </div>
                </div>
                <div class="mt-8 text-center">
                    <h4 class="text-lg font-semibold">Kesimpulan Akhir</h4>
                    <p class="text-slate-600 max-w-3xl mx-auto mt-2">Ketahanan protokol Bitcoin sangat kuat, namun harganya tetap volatil. Risiko utama bagi investor bukanlah "kehancuran" teknologi, melainkan penurunan harga yang signifikan. Periode kapitulasi pasar, yang ditandai oleh konvergensi indikator ke zona **$42.000 - $48.000**, secara historis bukan akhir dari Bitcoin, melainkan titik peluang finansial maksimum bagi investor yang sabar dan terinformasi.</p>
                </div>
            </div>
        </section>

        <section id="ai-analysis" class="scroll-mt-20">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold">âœ¨ Analisis Skenario AI</h2>
                <p class="mt-2 max-w-2xl mx-auto text-md text-slate-600">Gunakan kekuatan AI untuk menganalisis bagaimana berbagai peristiwa pasar dapat memengaruhi Bitcoin. Masukkan skenario di bawah ini untuk mendapatkan wawasan.</p>
            </div>
            <div class="bg-white p-8 rounded-lg shadow-xl max-w-4xl mx-auto">
                <div class="w-full">
                    <label for="scenario-input" class="block text-sm font-medium">Masukkan Skenario Pasar:</label>
                    <textarea id="scenario-input" rows="3" class="mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="Contoh: The Fed menaikkan suku bunga sebesar 50 basis poin secara tak terduga."></textarea>
                </div>
                <div class="mt-4 text-center">
                    <button id="get-ai-analysis" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-slate-400 dark:disabled:bg-slate-600">
                        Hasilkan Analisis AI
                    </button>
                </div>
                <div id="ai-result-container" class="mt-6 hidden">
                     <h3 class="text-xl font-semibold mb-2">Hasil Analisis:</h3>
                     <div id="ai-loader" class="loader hidden"></div>
                     <div id="ai-result-text" class="bg-slate-50 p-4 rounded-md prose max-w-none"></div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-800 text-slate-300 mt-16">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 text-center text-sm">
            <p>&copy; 2025 Dasbor Analisis Bitcoin. Dibuat berdasarkan "Laporan Analisis Risiko dan Proyeksi Harga Terendah Bitcoin (Juli 2025)".</p>
            <p>Informasi ini hanya untuk tujuan edukasi dan bukan merupakan nasihat keuangan. Analisis AI dihasilkan oleh model bahasa dan mungkin tidak akurat.</p>
        </div>
    </footer>

    <div id="explanation-modal" class="modal">
        <div class="modal-content p-8 rounded-lg">
            <span id="explanation-modal-close-btn" class="modal-close absolute top-4 right-4 text-2xl font-bold">&times;</span>
            <h2 id="modal-title" class="text-2xl font-bold mb-4"></h2>
            <div id="modal-loader" class="loader"></div>
            <div id="modal-text" class="prose max-w-none"></div>
        </div>
    </div>

    <div id="settings-modal" class="modal">
        <div class="modal-content p-8 rounded-lg">
            <span id="settings-modal-close-btn" class="modal-close absolute top-4 right-4 text-2xl font-bold">&times;</span>
            <h2 class="text-2xl font-bold mb-4">Pengaturan</h2>
            <div>
                <label for="api-key-input" class="block text-sm font-medium mb-2">Kunci API Gemini</label>
                <input type="password" id="api-key-input" class="block w-full rounded-md border-slate-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="Masukkan kunci API Anda di sini">
                <p class="text-xs text-slate-500 mt-1">Kunci API Anda disimpan dengan aman di peramban Anda dan tidak pernah dibagikan.</p>
            </div>
            <div class="mt-6 text-right">
                <button id="save-api-key-btn" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    Simpan
                </button>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            let drawdownChart, mvrvChart, priceChart;

            // Theme Toggle
            const themeToggleBtn = document.getElementById('theme-toggle');
            const darkIcon = document.getElementById('theme-toggle-dark-icon');
            const lightIcon = document.getElementById('theme-toggle-light-icon');

            function updateThemeIcons() {
                if (document.documentElement.classList.contains('dark')) {
                    lightIcon.classList.remove('hidden');
                    darkIcon.classList.add('hidden');
                } else {
                    lightIcon.classList.add('hidden');
                    darkIcon.classList.remove('hidden');
                }
            }

            themeToggleBtn.addEventListener('click', () => {
                document.documentElement.classList.toggle('dark');
                if (document.documentElement.classList.contains('dark')) {
                    localStorage.setItem('theme', 'dark');
                } else {
                    localStorage.setItem('theme', 'light');
                }
                updateThemeIcons();
                updateChartThemes();
            });
            
            updateThemeIcons();

            function getChartColors() {
                const isDarkMode = document.documentElement.classList.contains('dark');
                return {
                    grid: isDarkMode ? 'rgba(71, 85, 105, 0.5)' : 'rgba(203, 213, 225, 0.5)',
                    ticks: isDarkMode ? '#94a3b8' : '#475569',
                    text: isDarkMode ? '#f1f5f9' : '#1e293b'
                };
            }

            function updateChartThemes() {
                const colors = getChartColors();
                const charts = [drawdownChart, mvrvChart, priceChart];
                charts.forEach(chart => {
                    if (chart) {
                        chart.options.scales.x.grid.color = colors.grid;
                        chart.options.scales.y.grid.color = colors.grid;
                        chart.options.scales.x.ticks.color = colors.ticks;
                        chart.options.scales.y.ticks.color = colors.ticks;
                        chart.options.plugins.legend.labels.color = colors.text;
                        chart.options.plugins.title.color = colors.text;
                        chart.update();
                    }
                });
            }

            function createCharts() {
                const initialColors = getChartColors();
                
                const drawdownData = {
                    labels: ['Siklus 2013-2015', 'Siklus 2017-2018', 'Siklus 2021-2022'],
                    datasets: [{
                        label: 'Penurunan dari ATH (%)',
                        data: [86, 84, 78],
                        backgroundColor: ['rgba(239, 68, 68, 0.7)', 'rgba(249, 115, 22, 0.7)', 'rgba(245, 158, 11, 0.7)'],
                        borderColor: ['#dc2626', '#f97316', '#f59e0b'],
                        borderWidth: 1
                    }]
                };
                const drawdownCtx = document.getElementById('drawdownChart').getContext('2d');
                drawdownChart = new Chart(drawdownCtx, {
                    type: 'bar',
                    data: drawdownData,
                    options: {
                        responsive: true, maintainAspectRatio: false, indexAxis: 'y',
                        scales: {
                            x: { beginAtZero: true, max: 100, grid: { color: initialColors.grid }, ticks: { color: initialColors.ticks, callback: (v) => v + '%' } },
                            y: { grid: { color: initialColors.grid }, ticks: { color: initialColors.ticks } }
                        },
                        plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => ' Penurunan: ' + c.raw + '%' } } }
                    }
                });

                const mvrvData = {
                    labels: ['2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023', '2024', '2025'],
                    datasets: [{
                        label: 'Rasio MVRV', data: [1.2, 0.8, 1.5, 4.0, 0.9, 2.5, 3.0, 4.5, 0.85, 1.8, 2.9, 2.5],
                        fill: { target: 'origin', above: 'rgba(59, 130, 246, 0.1)', below: 'rgba(16, 185, 129, 0.2)' },
                        borderColor: 'rgb(59, 130, 246)', tension: 0.4, pointRadius: 0
                    }, {
                        label: 'Ambang Batas Kapitulasi', data: Array(12).fill(1.0),
                        borderColor: 'rgb(239, 68, 68)', borderWidth: 2, pointRadius: 0, borderDash: [5, 5]
                    }]
                };
                const mvrvCtx = document.getElementById('mvrvChart').getContext('2d');
                mvrvChart = new Chart(mvrvCtx, {
                    type: 'line', data: mvrvData,
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        scales: {
                            y: { beginAtZero: false, grid: { color: initialColors.grid }, ticks: { color: initialColors.ticks } },
                            x: { grid: { color: initialColors.grid }, ticks: { color: initialColors.ticks } }
                        },
                        plugins: { tooltip: { mode: 'index', intersect: false }, legend: { labels: { color: initialColors.text } } }
                    }
                });

                const priceLabels = ['2018', '2019', '2020', '2021', '2022', '2023', '2024', '2025'];
                const priceData = {
                    labels: priceLabels,
                    datasets: [
                        { label: 'Harga Bitcoin (USD)', data: [3200, 13000, 29000, 69000, 15500, 44000, 73000, 123000], borderColor: document.documentElement.classList.contains('dark') ? '#f1f5f9' : '#0f172a', tension: 0.1, yAxisID: 'y' },
                        { label: '200W MA', data: [5000, 6000, 9000, 20000, 23000, 28000, 35000, 46000], borderColor: 'rgb(59, 130, 246)', borderDash: [5, 5], pointRadius: 0, hidden: true, yAxisID: 'y' },
                        { label: 'Realized Price', data: [5800, 6500, 8000, 24000, 21000, 26000, 38000, 48000], borderColor: 'rgb(249, 115, 22)', borderDash: [5, 5], pointRadius: 0, hidden: true, yAxisID: 'y' }
                    ]
                };
                const priceCtx = document.getElementById('priceChart').getContext('2d');
                priceChart = new Chart(priceCtx, {
                    type: 'line', data: priceData,
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        scales: {
                            y: { type: 'logarithmic', position: 'left', grid: { color: initialColors.grid }, ticks: { color: initialColors.ticks, callback: (v) => '$' + v.toLocaleString() } },
                            x: { grid: { color: initialColors.grid }, ticks: { color: initialColors.ticks } }
                        },
                        plugins: {
                            legend: { labels: { color: initialColors.text } },
                            tooltip: { mode: 'index', intersect: false, callbacks: { label: (c) => { let l = c.dataset.label || ''; if (l) { l += ': '; } if (c.parsed.y !== null) { l += new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(c.parsed.y); } return l; } } }
                        }
                    }
                });
            }
            
            createCharts();

            document.getElementById('toggle200WMA').addEventListener('click', () => { priceChart.setDatasetVisibility(1, !priceChart.isDatasetVisible(1)); priceChart.update(); });
            document.getElementById('toggleRealizedPrice').addEventListener('click', () => { priceChart.setDatasetVisibility(2, !priceChart.isDatasetVisible(2)); priceChart.update(); });
            
            const tabs = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const target = tab.getAttribute('data-tab');
                    tabs.forEach(t => t.classList.remove('active', 'bg-slate-700', 'text-white', 'dark:bg-slate-100', 'dark:text-slate-900'));
                    tab.classList.add('active', 'bg-slate-700', 'text-white', 'dark:bg-slate-100', 'dark:text-slate-900');
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === `tab-${target}`) {
                            content.classList.add('active');
                        }
                    });
                });
            });

            const mobileNav = document.getElementById('mobile-nav');
            mobileNav.addEventListener('change', (e) => { document.querySelector(e.target.value)?.scrollIntoView({ behavior: 'smooth' }); });

            // Modals Logic
            const explanationModal = document.getElementById('explanation-modal');
            const settingsModal = document.getElementById('settings-modal');
            const explanationModalCloseBtn = document.getElementById('explanation-modal-close-btn');
            const settingsModalCloseBtn = document.getElementById('settings-modal-close-btn');
            const settingsBtn = document.getElementById('settings-btn');
            const saveApiKeyBtn = document.getElementById('save-api-key-btn');
            const apiKeyInput = document.getElementById('api-key-input');
            
            settingsBtn.onclick = () => { settingsModal.style.display = 'flex'; };
            explanationModalCloseBtn.onclick = () => { explanationModal.style.display = 'none'; };
            settingsModalCloseBtn.onclick = () => { settingsModal.style.display = 'none'; };
            window.onclick = (event) => {
                if (event.target == explanationModal) explanationModal.style.display = 'none';
                if (event.target == settingsModal) settingsModal.style.display = 'none';
            };

            apiKeyInput.value = localStorage.getItem('geminiApiKey') || '';
            saveApiKeyBtn.addEventListener('click', () => {
                localStorage.setItem('geminiApiKey', apiKeyInput.value);
                settingsModal.style.display = 'none';
                alert('Kunci API berhasil disimpan!');
            });

            // Gemini API Integration
            const modalTitle = document.getElementById('modal-title');
            const modalText = document.getElementById('modal-text');
            const modalLoader = document.getElementById('modal-loader');
            const scenarioInput = document.getElementById('scenario-input');
            const getAnalysisBtn = document.getElementById('get-ai-analysis');
            const aiResultContainer = document.getElementById('ai-result-container');
            const aiLoader = document.getElementById('ai-loader');
            const aiResultText = document.getElementById('ai-result-text');

            async function callGemini(prompt) {
                const userApiKey = localStorage.getItem('geminiApiKey') || "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${userApiKey}`;
                const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };

                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`API call failed with status: ${response.status}. ${errorData.error?.message || ''}`);
                    }
                    const result = await response.json();
                    if (result.candidates && result.candidates[0]?.content?.parts[0]?.text) {
                        return result.candidates[0].content.parts[0].text;
                    } else {
                        return "Tidak dapat memperoleh respons dari AI. Struktur respons tidak terduga atau konten diblokir.";
                    }
                } catch (error) {
                    console.error("Gemini API Error:", error);
                    return `Terjadi kesalahan saat menghubungi AI: ${error.message}. Pastikan kunci API Anda valid dan coba lagi.`;
                }
            }
            
            document.querySelectorAll('.explain-btn').forEach(button => {
                button.addEventListener('click', async function() {
                    const concept = this.getAttribute('data-concept');
                    explanationModal.style.display = 'flex';
                    modalTitle.innerText = `âœ¨ Penjelasan: ${concept}`;
                    modalText.style.display = 'none';
                    modalLoader.style.display = 'block';
                    const prompt = `Jelaskan konsep "${concept}" dalam konteks Bitcoin dengan bahasa yang sederhana dan mudah dimengerti (dalam Bahasa Indonesia), seolah-olah untuk seorang pemula. Gunakan analogi jika memungkinkan untuk memperjelas. Format jawaban dalam paragraf singkat.`;
                    const explanation = await callGemini(prompt);
                    modalLoader.style.display = 'none';
                    modalText.innerHTML = explanation.replace(/\n/g, '<br>');
                    modalText.style.display = 'block';
                });
            });

            getAnalysisBtn.addEventListener('click', async () => {
                const userInput = scenarioInput.value.trim();
                if (!userInput) {
                    alert("Silakan masukkan skenario terlebih dahulu.");
                    return;
                }
                aiResultContainer.style.display = 'block';
                aiLoader.style.display = 'block';
                aiResultText.style.display = 'none';
                getAnalysisBtn.disabled = true;
                const prompt = `Sebagai seorang analis kripto ahli, berikan analisis kualitatif mengenai potensi dampak dari skenario berikut pada harga Bitcoin, sentimen pasar, dan kesehatan jaringan. Skenario: "${userInput}".\n\nKonteks untuk dipertimbangkan:\n- Harga Bitcoin sangat volatil dan dipengaruhi oleh faktor makroekonomi.\n- Support historis jangka panjang berada di sekitar 200-week MA dan Realized Price.\n- Adopsi institusional sedang meningkat.\n\nBerikan jawaban terstruktur dalam Bahasa Indonesia, dengan poin-poin berikut:\n1.  **Potensi Dampak pada Harga:** (Jangka pendek dan menengah)\n2.  **Perubahan Sentimen Pasar:** (Bullish/Bearish/Netral dan mengapa)\n3.  **Implikasi pada Jaringan:** (misalnya, hashrate, aktivitas on-chain)\n4.  **Kesimpulan Singkat:**`;
                const analysis = await callGemini(prompt);
                aiLoader.style.display = 'none';
                aiResultText.innerHTML = analysis.replace(/\n/g, '<br>');
                aiResultText.style.display = 'block';
                getAnalysisBtn.disabled = false;
            });
        });
    </script>
</body>
</html>
